# 概要

FPGA を理解するうえで 基本となる**LUT, FF, BRAM, DSPについて調べる。**

### 1. **LUT (Look-Up Table)**

* FPGA の「基本的な論理回路」を実現する部品。
* 例えば、2入力や4入力の真理値表を持っていて、それに従って出力を出す。
* AND, OR, XOR, 複雑な組み合わせ回路も LUT の組み合わせで作れる。

👉 例: `y = (a AND b) OR c` みたいな式は LUT で簡単に実現。

👉 FPGA 内の「プログラマブルな回路」を作る中心的な要素。

### 2. **FF (Flip-Flop)**

* 1ビットの記憶素子（フリップフロップ）。
* クロック同期で信号を保持する。
* **レジスタ** として使われ、パイプライン処理や状態保持に必須。

👉 例: カウンタ、シーケンサ、パイプラインステージを作るときに使う。

### 3. **BRAM (Block RAM)**

* FPGA に内蔵されている「大きめのメモリブロック」。
* 数キロビット～数百キロビット単位でまとまった RAM として使える。
* FIFO, バッファ、画像処理用のラインバッファなどに利用。

👉 例:

* 通信データを一時的にためる FIFO
* 画像処理で「1行分のピクセルデータ」を保存

### 4. **DSP (Digital Signal Processor block)**

* 乗算や加算などを高速に処理できる専用ハードブロック。
* 特に **a × b + c** のような演算を 1クロックで処理できる。
* 信号処理（FIRフィルタ、FFT）、行列計算、機械学習アクセラレータなどで活躍。

👉 例: `y <= a * b + c;` を LUT で作ると膨大なリソースを食うが、DSP ブロックなら数十倍効率的。


> BRAMはFPGA内の大きめのメモリブロック。まとまったRAMとして使える。
>
> 通信データを一時的にためるFIFO。

> DSP=乗算や加算を高速に処理できる専用ハードブロック。
>
> $$
> a \times b +c
> $$
>
> を１クロックで処理できる。


## 🔹 まとめイメージ

FPGA を「積み木」に例えると：

* **LUT** → 基本の「ブロック（論理ゲート集）」
* **FF** → 「レジスタ（1ビットの記憶箱）」
* **BRAM** → 「倉庫（大量のデータを一時的に保存）」
* **DSP** → 「計算機（掛け算・足し算専用の高速部品）」

### レジスタ

* **1ビットまたは複数ビットのデータを、一時的に記憶する回路** です。
* 多くの場合、**クロック信号に同期して値を保持・更新**します。
* FPGA の場合は **FF（フリップフロップ）** が 1ビットのレジスタに相当し、複数ビットをまとめたものが「レジスタ」と呼ばれます。

#### 🔹 レジスタの特徴

1. **クロック同期**
   * クロックの立ち上がり（または立ち下がり）で入力値を取り込み、次のクロックまで出力を保持します。
   * → 「一定タイミングで値を更新し続ける」仕組み。
2. **揮発性**
   * 電源を切ると内容は消えます。
   * ROMやRAMとは違い、プログラムや大容量データを保存する用途ではなく、**回路の状態を一時的に記憶**するのに使います。
3. **用途**
   * カウンタの値を保持
   * 状態機械（FSM）の状態を記憶
   * データのパイプライン化
   * CPU では命令実行のための作業用ストレージ

#### 🔹 CPUのレジスタとの違い

* FPGA の「レジスタ」 = 論理回路の状態を保持する素子（ハードウェア的）。
* CPU の「レジスタ」 = プログラムからアクセスできる作業用メモリ領域（アーキテクチャ的）。

どちらも「小容量・高速・一時的なデータ保持」という点は共通です。
